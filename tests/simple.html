<html>
<head>

<style>
    body {
        background: black;
        overflow:hidden;
        padding:0;
        margin:0;
        color: white;
    }
    
    #header 
    {
        margin: 0;
        padding: 5;
        background: #c60;
        color: #fff;
        font-family: Arial;
        font-weight: bold;
    }    

    #ViewContainer 
    {
        clear: both;
        position: absolute;
    }
    
    #Coords
    {
        float: right;
        position: relative;
        z-index: 10;
    }
    
</style>

<title>Godzi WebGL</title>

<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">

<script type="text/javascript" src="../js/jquery/jquery-1.4.2.js"></script>
<script type="text/javascript" src="../js/godzi.js"></script>

<script type="text/javascript">

    godzi.init("../js/", function() {

        // create a map model:
        var map = new godzi.Map();  //godzi.createMap();
        map.addImageLayer(new godzi.TMSImageLayer("Landsat", "http://readymap.org/readymap/tiles/1.0.0/22/"));

        // create a view tied to a page element:
        var size = godzi.getWindowSize();
        size.h -= jQuery('#header').height();
        var mapView = new godzi.MapView("3DView", size, map);

        // display the Lat/Long:
        mapView.viewer.frameEnd = function() {
            var viewMatrix = mapView.viewer.view.getViewMatrix();
            viewMatrix = osg.Matrix.inverse(viewMatrix);
            var eye = [];
            osg.Matrix.getTrans(viewMatrix, eye);
            var lla = map.profile.ellipsoid.ecef2lla(eye);
            lla[0] = osgearth.rad2deg(lla[0]);
            lla[1] = osgearth.rad2deg(lla[1]);
            jQuery("#Coords").html("Lat: " + lla[0].toFixed(2) + "\u00B0" + " Long = " + lla[1].toFixed(2) + "\u00B0");
        }
    });

</script>
</head>

<body>
  <div id="header">
    <p>osgEarth / WebGL - Pelican Mapping</p>
  </div>
  <div id="ViewContainer">
    <canvas id="3DView"></canvas>
  </div>
    <p id="Coords"></p>
</body>

</html>
